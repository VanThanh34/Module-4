<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Danh sách Blog</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <h1 class="text-center mb-4 text-primary">Danh sách các Blog</h1>

    <!-- Nút thêm mới -->
    <div class="d-flex justify-content-end mb-3">
        <a th:href="@{/blogs/create}" class="btn btn-primary">+ Thêm mới</a>
    </div>

    <!-- Bảng blog -->
    <div class="table-responsive shadow-sm rounded w-95 ">
        <table class="table table-striped table-bordered align-middle">
            <thead class="table-dark text-center">
            <tr>
                <th scope="col">STT</th>
                <th scope="col">Ngày Blog</th>
                <th scope="col">Mô tả</th>
                <th scope="col">Danh Mục</th>
                <th scope="col">Nội dung</th>
                <th scope="col">Hành động</th>
            </tr>
            </thead>
            <tbody>
            <!-- Trường hợp không có dữ liệu -->
            <tr th:if="${#lists.isEmpty(blogs)}">
                <td colspan="6" class="text-center text-danger fw-bold" th:text="${notfound}"></td>
            </tr>

            <!-- Hiển thị danh sách -->
            <tr th:each="blog, stat : ${blogs}">
                <td th:text="${stat.index + 1}"></td>
                <td th:text="${blog.day}"></td>
                <td th:text="${blog.description}"></td>
                <td th:text="${blog.category != null ? blog.category.name : 'Không có'}"></td>
                <td th:text="${blog.context}"></td>
                <td>
                    <div class="d-flex justify-content-center gap-2 flex-wrap">
                        <a th:href="@{/blogs/detail/{id}(id=${blog.id})}" class="btn btn-sm btn-info">
                            Chi tiết
                        </a>
                        <a th:href="@{/blogs/update/{id}(id=${blog.id})}" class="btn btn-sm btn-warning">
                            Cập nhật
                        </a>
                        <a th:href="@{/blogs/delete/{id}(id=${blog.id})}"
                           class="btn btn-sm btn-danger"
                           onclick="return confirm('Bạn có chắc muốn xoá blog này?')">
                            Xoá
                        </a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item" th:classappend=" ${!blogs.hasPrevious()} ? 'disabled'">
                <a class="page-link" th:href="@{/blogs(page=${blogs.number - 1})}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item" th:each="num : ${#numbers.sequence(0, blogs.getTotalPages() - 1)}"
                th:classappend="${num} == ${blogs.number} ? 'active'">
                <a class="page-link" th:href="@{/blogs(page  = ${num})}" th:text="${num}" ></a>
            </li>

            <li class="page-item"  th:classappend=" ${!blogs.hasNext()} ? 'disabled'">
                <a class="page-link" th:href="@{/blogs(page=${blogs.number + 1})}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
    <!-- Thông báo -->
    <p id="message" class="text-success fw-bold mt-3 text-center" th:text="${message}"></p>
</div>

<script>
    setTimeout(function () {
        let msg = document.getElementById("message");
        if (msg) msg.style.display = "none";
    }, 3000)
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
